//2012-11-27 11:2 chs
typeof sohuHD=="undefined"&&(sohuHD={}),function(e){typeof sohuHD.count=="undefined"&&(sohuHD.count={ran:!1,formatCount:function(e){var t=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return e>=1e5?e=parseInt(e/1e4).toString().replace(t,"$1,")+"\u4e07":e=e.toString().replace(t,"$1,"),e},getCount:function(t,n,r,i){if(t==null||t.length==0)return;var s=i||"",o=[],u=[],a=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;t.each(function(t,r){u.push(r),o.push(e(r).attr("rel").split("_")[0]),e(r).attr("id",n+e(r).attr("rel"))});if(o.length<=0)return;e.ajax({type:"GET",dataType:"script",url:r+o.join(",")+"&jsonp="+n+s+"&type=2",cache:!0,success:function(){n=="count"&&o.length==1?e("#"+n+o[0]).html(sohuHD.count.formatCount(window[n+s])).show():window[n+s]&&window[n+s].videos&&e.each(window[n+s].videos,function(t,r){n=="count"?e.each(u,function(t,i){e(i).attr("id").indexOf(n+r.pid)==0&&e(i).html(sohuHD.count.formatCount(r.count)).show()}):e.each(u,function(t,i){e(i).attr("id").indexOf(n+r.videoId)==0&&e(i).html(sohuHD.count.formatCount(r.count)).show()})})}})},getBokeCount:function(t,n,r,i){if(t==null||t.length==0)return;var s=i||"",o=[],u=[],a=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;t.each(function(t,r){u.push(r),o.push(e(r).attr("rel").split("_")[0]),e(r).attr("id",n+e(r).attr("rel"))});if(o.length==0)return;e.ajax({type:"GET",dataType:"script",url:r+o.join("|")+"&n="+n+s,cache:!0,success:function(){window[n+s]&&e.each(window[n+s],function(t,r){e.each(u,function(t,i){e(i).attr("id").indexOf(n+r.id)==0&&e(i).html(sohuHD.count.formatCount(r.count)).show()})})}})},getCountBy:function(e,t){sohuHD.count.getCount(e.find(".pcount"),"pvid","http://count.vrs.sohu.com/count/query.action?videoId=",t),sohuHD.count.getCount(e.find(".acount"),"count","http://count.vrs.sohu.com/count/query_Album.action?albumId=",t),sohuHD.count.getBokeCount(e.find(".bcount"),"bvid","http://vstat.v.blog.sohu.com/dostat.do?method=getVideoPlayCount&v=",t),sohuHD.count.getCount(e.find(".rcount"),"rp_vids","http://access.tv.sohu.com/reply/cnts.do?videoId=",t)}}),sohuHD.count.ran||(sohuHD.count.ran=!0,e(function(){sohuHD.count.getCountBy(e("body"))}))}(jQuery)